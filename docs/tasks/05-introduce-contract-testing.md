### Task: Introduce Contract Testing Between Services

-   **Priority**: Medium
-   **Complexity**: High
-   **Description**: To prevent integration issues between the `Insurance.Service` (consumer) and `Vehicle.Service` (provider), we need to ensure that the API contract between them is not accidentally broken. Contract testing provides a way to verify this interaction without running slow and brittle end-to-end integration tests. This task involves setting up contract testing using a framework like [Pact](https://pact.io/).
-   **Affected Files**:
    -   `src/Insurance/Insurance.IntegrationTests/` (or a new test project `Insurance.ContractTests`)
    -   `src/Vehicle/Vehicle.IntegrationTests/` (or a new test project `Vehicle.ContractTests`)
    -   `.github/workflows/ci.yml` (to orchestrate the tests)

-   **Action Points**:

    **Part 1: Consumer Side (`Insurance.Service`)**
    1.  **Add Pact NuGet Package**: Add the `PactNet` NuGet package to the `Insurance.IntegrationTests` project.
    2.  **Write Consumer Pact Test**: Create a new test class (e.g., `VehicleServicePactTests`). In this test, define the expected interaction with the `Vehicle.Service`.
        -   Use the Pact DSL to specify the request `Insurance.Service` will make (e.g., a `POST` to `/api/v1/vehicles/batch` with a specific body).
        -   Define the expected response from `Vehicle.Service` (e.g., a `200 OK` status with a JSON body matching the `Vehicle.Service.Contracts.Vehicle[]` structure).
    3.  **Generate Pact File**: Configure the test to run against a mock server provided by Pact. When this test passes, it will generate a `pact.json` file. This file is the "contract".
    4.  **Publish Pact File**: In the CI pipeline (`.github/workflows/ci.yml`), add a step to publish the generated `pact.json` file. This can be done by uploading it as a build artifact or, more robustly, by using a [Pact Broker](https://docs.pact.io/pact_broker).

    **Part 2: Provider Side (`Vehicle.Service`)**
    5.  **Add Pact NuGet Package**: Add the `PactNet` NuGet package to the `Vehicle.IntegrationTests` project.
    6.  **Write Provider Verification Test**: Create a new test that will verify the provider's compliance with the contract.
        -   This test will start a real instance of the `Vehicle.Service` using the existing `WebApplicationFactory`.
        -   It will then point the Pact verifier to the `pact.json` file generated by the consumer.
        -   The Pact framework will automatically replay the requests from the pact file against the running `Vehicle.Service` instance and assert that the responses match the expectations in the contract.
    7.  **Orchestrate in CI**: In `.github/workflows/ci.yml`, ensure the provider verification tests run *after* the consumer has published the pact file. The provider test job should download the pact artifact before running.

-   **Verification**:
    -   The consumer test should generate a `pact.json` file.
    -   The provider verification test should run successfully against the real `Vehicle.Service` using the generated pact file.
    -   Breaking the API in `Vehicle.Service` (e.g., changing a field name in the response) should cause the provider verification test to fail.
